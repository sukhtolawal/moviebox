!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?e():"function"==typeof define&&define.amd?define(e):e()}(0,function(){"use strict";function n(n,t){return{type:n,entryType:"render",startTime:Math.round(t.startTime),duration:Math.round(t.startTime),timeStamp:t.timeStamp,name:e(t.name||t.entryType),ua:g}}function e(n){return n.replace(/-([a-z])/g,function(n,e){return e.toUpperCase()})}function t(n){try{if(window.dltLocalChannel&&window.dltLocalChannel.report)window.dltLocalChannel.report("Performance",JSON.stringify({render:n}),0,3755);else{var e=window["@transsion/byteh5bridge"];e&&window.dltms&&window.dltms.isMiniShellGame()&&e.callApi("report",{tag:"Performance",reportData:JSON.stringify({render:n})})}}catch(n){console.log("report performance error",n)}}var i=function(n){document.prerendering?window.addEventListener("prerenderingchange",function(){return n()},!0):n()},r=function(){return"v3-".concat(Date.now(),"-").concat(Math.floor(Math.random()*(9e12-1))+1e12)},o=function(n,e){return{name:n,value:void 0===e?-1:e,rating:"good",delta:0,entries:[],id:r(),navigationType:"navigate"}},a=function(n,e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(n)){var i=new PerformanceObserver(function(n){Promise.resolve().then(function(){e(n.getEntries())})});return i.observe(Object.assign({type:n,buffered:!0},t||{})),i}}catch(n){}},c=function(n){var e=function(e){"pagehide"!==e.type&&"hidden"!==document.visibilityState||n(e)};document.addEventListener("visibilitychange",e,!0)},u=function(n,e){return n>e[1]?"poor":n>e[0]?"needs-improvement":"good"},d=function(n,e,t,i){var r,o;return function(a){e.value>=0&&(a||i)&&((o=e.value-(r||0))||void 0===r)&&(r=e.value,e.delta=o,e.rating=u(e.value,t),n(e))}},f=function(n){var e=!1;return function(t){e||(n(t),e=!0)}},l=[1800,3e3],s=function(n,e){e=e||{},i(function(){var t=null,i=o("FCP"),r=function(n){n.forEach(function(n){"first-contentful-paint"===n.name&&(i.value=n.startTime,n.timeStamp=Date.now(),i.entries.push(n),c.disconnect(),t(!0))})},c=a("paint",r);c&&(t=d(n,i,l,e.reportAllChanges))})},p=[2500,4e3],m={},v=function(n,e){e=e||{},i(function(){var t=null,i=o("LCP"),r=function(n){var e=n[n.length-1];e&&(e.timeStamp=Date.now(),i.value=e.startTime,i.entries=[e])},u=a("largest-contentful-paint",r);if(u){t=d(n,i,p,e.reportAllChanges);var l=f(function(){m[i.id]||(r(u.takeRecords()),u.disconnect(),m[i.id]=!0,t(!0))});["keydown","touchmove","click"].forEach(function(n){window.addEventListener(n,l,!0)}),c(l)}})},h=[1800,3e3],w=function(n,e){e=e||{},i(function(){var t=null,i=o("paint"),r=function(n){n.forEach(function(n){n.timeStamp=Date.now(),i.value=n.startTime,i.entries.push(n),"first-contentful-paint"===n.name&&(c.disconnect(),t(!0))})},c=a("paint",r);c&&(t=d(n,i,h,e.reportAllChanges))})},g=navigator.userAgent||"";!function(){if(!window._dlt_monitor_injected){var e=[];w(function(t){e.push(n("FP",t.entries[0])),e.push(n("FCP",t.entries[1]))}),v(function(i){e.push(n("LCP",i.entries[0])),t(JSON.stringify(e))}),s(function(n){try{if(window.dltLocalChannel&&window.dltLocalChannel.onPageFinished){var e=JSON.stringify({url:window.location.href,fcpCurrentTimeMillis:n.entries[0].timeStamp});window.dltLocalChannel.onPageFinished(e)}}catch(n){console.log("onPageFinished error",n)}}),window._dlt_monitor_injected=!0}}()});
